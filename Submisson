def courtyard(items, coins):
    print("you are in a windy courtyard. a stone gardener stands by a dry fountain.")
    print("a. kitchen  b. armory  c. pick apple  d. fountain  e. tower gate")

    while True:

        choice = input("choose a-e or check items: ")

        if choice == "a":
            kitchen(items, coins)
            return

        elif choice == "b":
            armory(items, coins)
            return

        elif choice == "c":
            if "apple" in items:
                print("you already took the apple.")
            else:
                print("you took an apple.")
                items.append("apple")

        elif choice == "d":
            if "fountain coin" in coins:
                print("nothing else in the fountain.")
            else:
                print("you found a coin.")
                coins.append("fountain coin")

        elif choice == "e":
            if "royal seal" in items:
                tower(items, coins)
                return
            else:
                print("the tower gate is sealed. maybe you need proof to enter.")

        elif choice == "check" or choice == "check items":
            if len(items) > 0:
                print(f"items: {items}")
            else:
                print("items: none")
            print(f"coins: {len(coins)}")

        else:
            print("pick a-e or check items.")


def kitchen(items, coins):
    print("kitchen. a chef ghost floats by a cold oven.")
    print("a. cupboards  b. talk to chef  c. courtyard  d. cellar")

    while True:

        choice = input("choose a-d or check items: ")

        if choice == "a":
            if "wooden spoon" in items:
                print("nothing useful left.")
            else:
                print("you took a wooden spoon.")
                items.append("wooden spoon")

        elif choice == "b":
            if "silver key" in items:
                print("chef: 'no more deals.'")
            else:
                if "apple" in items:
                    print("chef trades you for a silver key.")
                    items.append("silver key")
                else:
                    print("chef: 'bring me something fresh.'")

        elif choice == "c":
            courtyard(items, coins)
            return

        elif choice == "d":
            cellar(items, coins)
            return

        elif choice == "check" or choice == "check items":
            if len(items) > 0:
                print(f"items: {items}")
            else:
                print("items: none")
            print(f"coins: {len(coins)}")

        else:
            print("pick a-d or check items.")


def armory(items, coins):
    print("armory. a rusty knight stands still near a rack.")
    print("a. take shield  b. locker  c. talk to knight  d. courtyard  e. side stair")

    while True:

        choice = input("choose a-e or check items: ")

        if choice == "a":
            if "shield" in items:
                print("you already have the shield.")
            else:
                print("you took a shield.")
                items.append("shield")

        elif choice == "b":
            if "royal seal" in items:
                print("locker is empty.")
            else:
                if "silver key" in items:
                    print("you open the locker and take a royal seal.")
                    items.append("royal seal")
                else:
                    print("locker is locked. looks like it needs a silver key.")

        elif choice == "c":
            if "shield" in items:
                print("knight: 'good. the tower throws stones.'")
            else:
                print("the knight doesn't move.")

        elif choice == "d":
            courtyard(items, coins)
            return

        elif choice == "e":
            if "rope" in items:
                tower(items, coins)
                return
            else:
                print("stairs are broken. you need something to climb with.")

        elif choice == "check" or choice == "check items":
            if len(items) > 0:
                print(f"items: {items}")
            else:
                print("items: none")
            print(f"coins: {len(coins)}")

        else:
            print("pick a-e or check items.")


def cellar(items, coins):
    print("cellar. damp and dark. there's a chained chest and some crates.")
    print("a. crates  b. chest  c. kitchen  d. tower basement")

    while True:

        choice = input("choose a-d or check items: ")

        if choice == "a":
            if "rope" in items:
                print("nothing else in the crates.")
            else:
                print("you took rope.")
                items.append("rope")

        elif choice == "b":
            if "torch" in items:
                print("chest is empty.")
            else:
                if len(coins) > 0:
                    print("you force the lock with a coin and take a torch.")
                    items.append("torch")
                else:
                    print("the lock has a thin slot... maybe a coin could help.")

        elif choice == "c":
            kitchen(items, coins)
            return

        elif choice == "d":
            tower(items, coins)
            return

        elif choice == "check" or choice == "check items":
            if len(items) > 0:
                print(f"items: {items}")
            else:
                print("items: none")
            print(f"coins: {len(coins)}")

        else:
            print("pick a-d or check items.")


def tower(items, coins):
    print("tower. a silent bell hangs above spiral stairs.")
    print("a. go up  b. bell  c. courtyard  d. armory  e. cellar")

    while True:

        choice = input("choose a-e or check items: ")

        if choice == "a":
            if "shield" in items:
                final_boss(items, coins)
                return
            else:
                print("stones fall from above. you should have protection.")

        elif choice == "b":
            if "torch" in items:
                print("the torch light makes the tower feel safer.")
            else:
                print("the bell feels cold. very cold.")

        elif choice == "c":
            courtyard(items, coins)
            return

        elif choice == "d":
            armory(items, coins)
            return

        elif choice == "e":
            cellar(items, coins)
            return

        elif choice == "check" or choice == "check items":
            if len(items) > 0:
                print(f"items: {items}")
            else:
                print("items: none")
            print(f"coins: {len(coins)}")

        else:
            print("pick a-e or check items.")


def final_boss(items, coins):
    print("top of the tower. a shadow keeper blocks your way.")
    print("a. use royal seal  b. use torch  c. run back")

    while True:

        choice = input("choose a-c or check items: ")

        if choice == "a":
            if "royal seal" in items:
                print("it glows, but doesn't stop the shadow.")
            else:
                print("you don't have that.")

        elif choice == "b":
            if "torch" in items:
                print("the shadow burns away. you win!")
                return
            else:
                print("you don't have a torch.")

        elif choice == "c":
            tower(items, coins)
            return

        elif choice == "check" or choice == "check items":
            if len(items) > 0:
                print(f"items: {items}")
            else:
                print("items: none")
            print(f"coins: {len(coins)}")

        else:
            print("pick a-c or check items.")


def main():
    coins_list = []
    items_list = []
    courtyard(items_list, coins_list)

main()

